<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Furry North + | Hub Interactivo</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Lexend:wght@300;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <style>
        /* --- MOTOR DE TEMAS COMPLETO VITAMINADO --- */
        :root {
            /* TEMA N√âBULA (Vitaminado con degradados y brillos) */
            /* Fondo: Gradiente radial complejo y animado */
            --bg-body: radial-gradient(circle at 10% 20%, rgba(27, 22, 51, 1) 0%, rgba(10, 8, 20, 1) 44%, rgba(15, 12, 30, 1) 100%);
            /* Widgets: Cristal m√°s definido con m√°s blur */
            --glass: rgba(255, 255, 255, 0.04);
            --glass-border: rgba(255, 255, 255, 0.15);
            /* Acento y Brillo: M√°s intenso */
            --accent: #00d4ff;
            --accent-glow: rgba(0, 212, 255, 0.7);
            /* Sub pesta√±as: Gradiente en active */
            --sub-active-bg: linear-gradient(135deg, #00d4ff 0%, #7000ff 100%);
            
            --text: #ffffff;
            --text-dim: #b0b0d1;
            --radius: 20px;
            --nav-bg: rgba(8, 6, 18, 0.9);
            --card-head: rgba(0,0,0,0.3);
        }

        [data-theme="retro"] {
            --bg-body: #008080;
            --glass: #c0c0c0;
            --glass-border: #fff;
            --accent: #000080;
            --accent-glow: none;
            --sub-active-bg: #000080;
            --text: #000;
            --text-dim: #444;
            --radius: 0px;
            --nav-bg: #c0c0c0;
            --card-head: #808080;
        }

        [data-theme="aero"] {
            --bg-body: linear-gradient(180deg, #0051a8 0%, #28c0ff 100%);
            --glass: rgba(255, 255, 255, 0.5);
            --glass-border: rgba(255, 255, 255, 0.8);
            --accent: #0055ff;
            --accent-glow: rgba(255,255,255,0.8);
            --sub-active-bg: rgba(0, 80, 190, 0.8);
            --text: #002244;
            --text-dim: #004488;
            --radius: 15px;
            --nav-bg: rgba(255, 255, 255, 0.4);
            --card-head: rgba(255,255,255,0.3);
        }

        body { 
            font-family: 'Lexend', sans-serif; background: var(--bg-body); 
            color: var(--text); margin: 0; min-height: 100vh; transition: background 0.5s;
            /* Fondo animado para N√©bula */
            background-size: 200% 200%;
            animation: gradientBG 20s ease infinite;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- NAVEGACI√ìN LLAMATIVA --- */
        nav {
            background: var(--nav-bg); backdrop-filter: blur(20px);
            height: 70px; display: flex; justify-content: space-between; align-items: center;
            padding: 0 5%; border-bottom: 2px solid var(--accent); position: sticky; top:0; z-index:100;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
        }

        .logo { font-family: 'Fredoka One'; font-size: 1.5rem; color: var(--accent); text-shadow: 0 0 15px var(--accent-glow); }

        .main-nav-links { display: flex; gap: 10px; height: 100%; }
        .nav-item {
            display: flex; align-items: center; padding: 0 15px;
            text-decoration: none; font-family: 'Fredoka One'; font-size: 0.8rem;
            color: var(--text); opacity: 0.6; transition: 0.3s; cursor: pointer;
        }
        .nav-item.active { opacity: 1; border-bottom: 4px solid var(--accent); background: rgba(255,255,255,0.05); text-shadow: 0 0 5px var(--accent-glow); }

        .container { 
            max-width: 1200px; margin: 30px auto; padding: 0 20px; 
            display: grid; grid-template-columns: 260px 1fr 280px; gap: 25px; 
        }

        /* --- WIDGETS Y CRISTAL BRILANTE --- */
        .widget {
            background: var(--glass); backdrop-filter: blur(15px);
            padding: 20px; border-radius: var(--radius);
            border: 1px solid var(--glass-border); margin-bottom: 20px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
            transition: border-color 0.3s;
        }
        .widget:hover { border-color: var(--accent-glow); }
        .widget-title { font-family: 'Fredoka One'; font-size: 0.8rem; color: #faaf41; margin-bottom: 15px; text-transform: uppercase; text-shadow: 0 0 5px rgba(250, 175, 65, 0.5); }

        /* --- ENLACES CON GRADIENTE --- */
        .social-link {
            display: flex; align-items: center; padding: 10px; margin: 8px 0; border-radius: 10px;
            text-decoration: none; color: inherit; background: rgba(255,255,255,0.05);
            transition: 0.3s; font-size: 0.9rem; border: 1px solid transparent;
        }
        .social-link:hover { transform: translateX(5px); border-color: var(--glass-border); background: rgba(255,255,255,0.08); }
        .tg { border-left: 4px solid #26A5E4; }
        .tg:hover { background: linear-gradient(to right, rgba(38, 165, 228, 0.1), transparent); }
        .fa { border-left: 4px solid #FAAF41; }
        .fa:hover { background: linear-gradient(to right, rgba(250, 175, 65, 0.1), transparent); }

        /* --- SUB PESTA√ëAS GRADIENTE --- */
        .sub-tabs { display: flex; gap: 10px; margin-bottom: 20px; background: rgba(0,0,0,0.2); padding: 5px; border-radius: 30px; }
        .sub-btn { 
            background: transparent; border: none; color: inherit;
            padding: 10px 20px; border-radius: 25px; cursor: pointer; font-size: 0.7rem; font-weight: bold; transition: 0.3s;
        }
        .sub-btn.active { background: var(--sub-active-bg); color: #fff; box-shadow: 0 4px 15px var(--accent-glow); }

        /* --- NOTICIAS Y ANIMACI√ìN --- */
        .news-card { 
            background: rgba(255,255,255,0.02); border-radius: var(--radius); 
            margin-bottom: 15px; border: 1px solid var(--glass-border); overflow: hidden;
            animation: slideIn 0.4s ease-out; box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        .card-header { padding: 12px 18px; font-size: 0.75rem; background: var(--card-head); display: flex; justify-content: space-between; border-bottom: 1px solid var(--glass-border); }
        .card-body { padding: 18px; line-height: 1.6; font-size: 1.05rem; }

        /* --- MASCOTAS GRIDS --- */
        .pet-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .pet-card { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; text-align: center; border: 1px solid transparent; transition: 0.3s; }
        .pet-card:hover { border-color: var(--accent); background: rgba(255,255,255,0.08); transform: translateY(-3px); }

        /* --- CLICKER VITAMINADO Y BRILLANTE --- */
        .clicker-box { text-align: center; position: relative; }
        #paw-btn { 
            font-size: 4rem; cursor: pointer; transition: 0.1s; user-select: none; display: inline-block;
            filter: drop-shadow(0 0 15px var(--accent-glow));
            z-index: 2; position: relative;
        }
        #paw-btn:active { transform: scale(0.9) rotate(5deg); }
        
        /* Onda de choque al hacer clic */
        .onda-choque {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 10px; height: 10px; background: rgba(0, 212, 255, 0.5);
            border-radius: 50%; pointer-events: none; opacity: 0; z-index: 1;
        }
        .animate-onda { animation: ondaAnim 0.5s ease-out; }

        @keyframes ondaAnim {
            0% { width: 10px; height: 10px; opacity: 1; box-shadow: 0 0 10px var(--accent), 0 0 20px var(--accent); }
            100% { width: 150px; height: 150px; opacity: 0; box-shadow: 0 0 30px rgba(0, 212, 255, 0), 0 0 50px rgba(0, 212, 255, 0); }
        }

        @keyframes slideIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .section { display: none; }
        .section.active { display: block; }

        @media (max-width: 900px) { .container { grid-template-columns: 1fr; } .sidebar-left, .sidebar-right { display: none; } }
    </style>
</head>
<body data-theme="nebula">

<nav>
    <div class="logo">üêæ FURRY NORTH +</div>
    <div class="main-nav-links">
        <div class="nav-item active" onclick="showSec('noticias', this)">Noticias</div>
        <div class="nav-item" onclick="showSec('galeria', this)">Galer√≠a</div>
        <div class="nav-item" onclick="showSec('mascotas', this)">Mascotas</div>
        <div class="nav-item" onclick="showSec('info', this)">Con√≥cenos</div>
    </div>
</nav>

<div class="container">
    <aside class="sidebar-left">
        <div class="widget">
            <div class="widget-title">üñ•Ô∏è TEMAS FN</div>
            <div style="display: flex; flex-direction: column; gap: 8px;">
                <button onclick="setT('nebula')" style="cursor:pointer; padding:8px; border-radius:8px; border:1px solid rgba(255,255,255,0.1); background: linear-gradient(135deg, #1b1633, #0a0814); color:white; font-weight:bold; font-size:0.7rem;">üåå N√âBULA PRO</button>
                <button onclick="setT('retro')" style="cursor:pointer; padding:8px; border-radius:8px; border:none; background: #c0c0c0; color:black; font-family:Tahoma; font-size:0.7rem;">üíæ WIN RETRO</button>
                <button onclick="setT('aero')" style="cursor:pointer; padding:8px; border-radius:8px; border:1px solid rgba(255,255,255,0.3); background: rgba(40, 192, 255, 0.5); backdrop-filter:blur(5px); color:white; font-size:0.7rem;">üíß AERO GLASS</button>
            </div>
        </div>

        <div class="widget">
            <div class="widget-title">üìå ENLACES</div>
            <a href="#" class="social-link tg">‚úàÔ∏è Telegram Channel</a>
            <a href="#" class="social-link fa">üé® FurAffinity</a>
        </div>
    </aside>

    <main>
        <section id="sec-noticias" class="section active">
            <div class="sub-tabs">
                <button class="sub-btn active" onclick="cambiarFiltro('principal', this)">PRINCIPAL</button>
                <button class="sub-btn" onclick="cambiarFiltro('staff', this)">STAFF</button>
                <button class="sub-btn" onclick="cambiarFiltro('afiliados', this)">AFILIADOS</button>
            </div>
            <div id="feed"></div>
        </section>

        <section id="sec-mascotas" class="section">
            <div class="widget">
                <div class="widget-title">üêæ NUESTRAS MASCOTAS</div>
                <div class="pet-grid">
                    <div class="pet-card">ü¶ä <strong>Northy</strong><br><small style="color:var(--text-dim)">Zorro √Årtico</small></div>
                    <div class="pet-card">üê∫ <strong>Snow</strong><br><small style="color:var(--text-dim)">Lobo Gris</small></div>
                </div>
            </div>
        </section>

        <section id="sec-galeria" class="section">
            <div class="widget">üé® Galer√≠a en desarrollo por el Staff.</div>
        </section>

        <section id="sec-info" class="section">
            <div class="widget">
                <div class="widget-title">ü¶ä SOBRE NOSOTROS</div>
                <p>Somos una comunidad dedicada a conectar el fandom furry del Norte.</p>
            </div>
        </section>
    </main>

    <aside class="sidebar-right">
        <div class="widget clicker-box">
            <div class="widget-title">HUELLAS</div>
            <div style="position:relative; display:inline-block;">
                <div id="paw-btn" onclick="givePaw()">üêæ</div>
                <div id="onda" class="onda-choque"></div>
            </div>
            <div id="click-count" style="font-size: 2.2rem; font-family:'Fredoka One'; margin-top:10px; color:var(--text);">0</div>
        </div>

        <div class="widget">
            <div class="widget-title">üí° DATO CURIOSO</div>
            <div id="fact-display" style="font-size: 0.85rem; opacity: 0.8; line-height: 1.4;">Cargando dato...</div>
        </div>
    </aside>
</div>

<script>
    const SUPABASE_URL = 'https://inugvvfamtrwdrocbkse.supabase.co';
    const SUPABASE_KEY = 'sb_publishable_BNIM9w3LeDzvRQf1j0nckA_xHqScDst'; 
    const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    let filtroActual = 'principal';

    function showSec(id, el) {
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        el.classList.add('active');
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.getElementById('sec-'+id).classList.add('active');
        if(id === 'noticias') cargarNoticias();
    }

    function setT(t) { document.body.setAttribute('data-theme', t); }

    function cambiarFiltro(cat, btn) {
        filtroActual = cat;
        document.querySelectorAll('.sub-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        cargarNoticias();
    }

    async function cargarNoticias() {
        const { data } = await _supabase.from('noticias').select('*').eq('categoria', filtroActual).order('created_at', { ascending: false }).limit(10);
        const feed = document.getElementById('feed');
        feed.innerHTML = data && data.length ? '' : '<p style="text-align:center; opacity:0.3; padding: 20px;">Sin noticias en esta frecuencia.</p>';
        if(data) data.forEach(n => {
            const card = document.createElement('div');
            card.className = 'news-card';
            card.innerHTML = `<div class="card-header"><span style="color:var(--accent)">üì° ${n.autor}</span><span style="opacity:0.5;">${new Date(n.created_at).toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})}</span></div><div class="card-body">${n.contenido}</div>`;
            feed.appendChild(card);
        });
    }

    let count = 0;
    function givePaw() {
        count++; 
        document.getElementById('click-count').innerText = count;
        
        // Efecto visual: Onda de choque
        const onda = document.getElementById('onda');
        onda.classList.remove('animate-onda');
        void onda.offsetWidth; // Trigger reflow para reiniciar animaci√≥n
        onda.classList.add('animate-onda');

        // Brillo extra al contador cada 10 clics
        if(count % 10 === 0) {
            document.getElementById('click-count').style.color = 'var(--accent)';
            setTimeout(() => document.getElementById('click-count').style.color = 'var(--text)', 200);
        }
    }

    const facts = ["Los zorros oyen a 40m.", "El fandom naci√≥ en los 80.", "Los lobos a√∫llan para reunirse.", "Las huellas son √∫nicas."];
    function showFact() { document.getElementById('fact-display').innerText = facts[Math.floor(Math.random()*facts.length)]; }

    showFact();
    cargarNoticias();
</script>
</body>
</html>